---
import cfg from '@data/live_prayer.json';
---
<div class="card p-4 flex flex-col sm:flex-row items-center justify-between gap-4">
  <div>
    <h3 class="font-semibold text-lg">{cfg.title}</h3>
    <p class="text-sm">Pr√≥ximo: <span id="lp-when"></span></p>
    <p class="text-sm">Cuenta regresiva: <span id="lp-ctdwn"></span></p>
  </div>
  <a class="btn-primary" href={cfg.ctaUrl} target="_blank" rel="noreferrer">{cfg.ctaText}</a>
</div>

<script>
  const start = new Date('${cfg.start}');
  document.getElementById('lp-when').textContent = start.toLocaleString('es-CO');
  function tick() {
    const now = new Date();
    let s = Math.max(0, Math.floor((start - now)/1000));
    const h = Math.floor(s/3600); s -= h*3600;
    const m = Math.floor(s/60); s -= m*60;
    const t = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    document.getElementById('lp-ctdwn').textContent = t;
    requestAnimationFrame(()=>setTimeout(tick, 1000));
  }
  tick();
</script>
