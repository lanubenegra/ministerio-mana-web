---
type Appearance = 'always' | 'interaction-only' | 'execute';
type Theme = 'light' | 'dark' | 'auto';

interface Props {
  appearance?: Appearance;
  theme?: Theme;
  id?: string;
}

const { appearance = 'always', theme = 'auto', id } = Astro.props as Props;

// Site key must be public for Astro SSG (visible in HTML anyway, so it's safe)
const siteKey =
  Astro.locals?.turnstile?.siteKey ??
  import.meta.env?.PUBLIC_TURNSTILE_SITE_KEY ??
  import.meta.env?.TURNSTILE_SITE_KEY;  // Fallback for local dev
---

{siteKey && (
  <div
    id={id}
    class="cf-turnstile mt-3"
    data-sitekey={siteKey}
    data-appearance={appearance}
    data-theme={theme}
  />
)}
