---
import BaseLayout from '@layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
const posts = (await getCollection('news')).sort((a,b)=> new Date(b.data.date)-new Date(a.data.date));
---
<BaseLayout title="Noticias — Ministerio Maná" description="Noticias e historias de fe del Ministerio Maná.">
  <section class="section">
    <h1 class="h1 mb-6">Noticias</h1>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {posts.map(({id, slug, data}) => (
        <article class="card overflow-hidden">
          {data.cover && <img src={data.cover} alt={data.title} loading="lazy" class="w-full aspect-[16/9] object-cover"/>}
          <div class="p-4">
            <h2 class="font-semibold text-lg"><a href={`/noticias/${slug}/`} class="hover:underline">{data.title}</a></h2>
            <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">{data.excerpt}</p>
            <p class="text-xs mt-3">{new Date(data.date).toLocaleDateString('es')}</p>
          </div>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
